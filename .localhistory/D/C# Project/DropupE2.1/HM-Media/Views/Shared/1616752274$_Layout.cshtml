@using Data;
@using Data.Providers;
@{
    string urlCMS = System.Configuration.ConfigurationManager.AppSettings["urlCMS"];
    string urlSite = System.Configuration.ConfigurationManager.AppSettings["urlSite"];

    var list_service = new CategoryProvider().getByTypeNameOnSite("Danh mục dịch vụ");
    var list_category_project = new CategoryProvider().getByTypeNameOnSite("Danh mục dự án");

    var favicon = new StoreLogoProvider().getFavicon();
    var logo_header = new StoreLogoProvider().getLogoHeader();
    var logo_footer = new StoreLogoProvider().getLogoFooter();
    var logo_mobile = new StoreLogoProvider().getLogoMobile();
    var contact = new StoreContactProvider().get1Contact();

    var list_page_link = new PageProvider().getListShow();
    var list_page_parent = list_page_link.Where(p => p.page_parent_id == null).ToList();
    var list_page_2 = list_page_link.Where(p => p.mount_on_header_menu_status == false && p.mount_on_footer_menu_status == false).ToList();

    string fb_link = System.Configuration.ConfigurationManager.AppSettings["fb_link"];
    string instagram_link = System.Configuration.ConfigurationManager.AppSettings["instagram_link"];
    string zalo_link = System.Configuration.ConfigurationManager.AppSettings["zalo_link"];
    string linkedin_link = System.Configuration.ConfigurationManager.AppSettings["linkedin_link"];
    string twitter_link = System.Configuration.ConfigurationManager.AppSettings["twitter_link"];
    string shopee_link = System.Configuration.ConfigurationManager.AppSettings["shopee_link"];
    string lazada_link = System.Configuration.ConfigurationManager.AppSettings["lazada_link"];
    string tiktok_link = System.Configuration.ConfigurationManager.AppSettings["titok_link"];
    string youtube_link = System.Configuration.ConfigurationManager.AppSettings["youtube_link"];
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta name="google-site-verification" content="4clFmV8BK-YMIJORiDG09G7XF1zA6dYXuvIYVxvCU4o" />
    <title>@ViewBag.Title</title>
    <link rel="icon" type="image/png" href="@urlCMS/@favicon.image">

    <meta name="keywords" content="@ViewBag.Keywords">
    <meta name="description" content="@ViewBag.Description">
    <meta name="author" content="HaiDN - ngochaiit257@gmail.com">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta property="og:locale" content="vi_VN">
    <meta name="revisit" content="1 days">
    <meta name="robots" content="noodp,index,follow" />

    <!-- Helpers ================================================== -->
    <meta name="apple-mobile-web-app-title" content="HM Media">
    <meta name="application-name" content="HM Media">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <meta name="theme-color" content="#000">
    <meta name="format-detection" content="telephone=no">
    <meta name="robots" content="noodp,index, follow" />
    <link rel="canonical" href="@ViewBag.Canonical" />
    <link rel="alternate" href="@ViewBag.Alternate" hreflang="vi-vn" />
    <meta itemprop="name" content="@ViewBag.Title">
    <meta itemprop="description" content="@ViewBag.Description">
    <meta property="og:title" content="@ViewBag.Title" />
    <meta property="og:locale" content="vi_VN" />
    <meta property="og:url" content="@ViewBag.Url" />
    <meta property="og:description" content="@ViewBag.Description" />
    <meta property="og:site_name" content="HM Media" />
    <meta property="og:image" content="@ViewBag.Image" />
    <meta property="og:type" content="website">
    <meta property="og:image:secure_url" content="@ViewBag.Image" />
    <script src="../Assets/js/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Muli:400,500,700,800|Oswald:400,700|Caveat:400,700|Roboto+Condensed:300,400,700|Quicksand:300,400,500,600,700,800|Montserrat:300,400,500,600,700,800|Playfair+Display:400,400i,700,900&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,500,500i,600,600i,700,700i&amp;subset=vietnamese" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    @Styles.Render("~/bundles/styleCore")
    @Scripts.Render("~/bundles/jsCoreFirst")
</head>
<body>
    <!-- Load Facebook SDK for JavaScript -->
    <div id="fb-root"></div>
    <script>
        window.fbAsyncInit = function () {
            FB.init({
                xfbml: true,
                version: 'v9.0'
            });
        };

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = 'https://connect.facebook.net/vi_VN/sdk/xfbml.customerchat.js';
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>

    <!-- Your Chat Plugin code -->
    <div class="fb-customerchat"
         attribution=setup_tool
         page_id="748493612027424"
         logged_in_greeting="Chào bạn! HM Media có thể giúp gì cho bạn nhỉ? "
         logged_out_greeting="Chào bạn! HM Media có thể giúp gì cho bạn nhỉ? ">
    </div>
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v9.0&appId=1121691614960846&autoLogAppEvents=1" nonce="tH3UMcjv"></script>
    <!-- Header -->
    <div class="header-area">
        <div class="container">
            <div class="row">

                <div class="col-sm-9 col-lg-8">
                    <div class="left">
                        <ul>
                            <li>
                                <i class='bx bx-mail-send'></i>
                                <a href="mailto:@contact.email">@contact.email</a>
                            </li>
                            <li>
                                <i class='bx bx-phone-call'></i>
                                <a href="tel:@contact.phone_number">@contact.phone_number</a>
                            </li>
                            <li>
                                <i class='bx bx-time'></i>
                                <span>@contact.working_day : @contact.working_hour</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="col-sm-3 col-lg-4">
                    <div class="right">
                        <ul>
                            <li>
                                <a href="#" target="_blank">
                                    <i class='bx bxl-facebook'></i>
                                </a>
                            </li>
                            <li>
                                <a href="#" target="_blank">
                                    <i class='bx bxl-twitter'></i>
                                </a>
                            </li>
                            <li>
                                <a href="#" target="_blank">
                                    <i class='bx bxl-youtube'></i>
                                </a>
                            </li>
                            <li>
                                <a href="#" target="_blank">
                                    <i class='bx bxl-instagram'></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- End Header -->
    <!-- Navbar -->
    <div class="navbar-area sticky-top">
        <!-- Menu For Mobile Device -->
        <div class="mobile-nav">
            <a href="/" class="logo">
                <img src="@urlCMS/@logo_header.image" alt="@logo_header.alt">
            </a>
        </div>

        <!-- Menu For Desktop Device -->
        <div class="main-nav">
            <div class="container">
                <nav class="navbar navbar-expand-md navbar-light">
                    <a class="navbar-brand" href="/">
                        <img src="@urlCMS/@logo_header.image" alt="@logo_header.alt">
                    </a>
                    <div class="collapse navbar-collapse mean-menu" id="navbarSupportedContent">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a href="/" class="nav-link dropdown-toggle">Trang chủ</a>
                            </li>

                            @if (list_page_parent.Count > 0)
                            {
                                foreach (var pp in list_page_parent)
                                {
                                    if (pp.mount_on_header_menu_status == true)
                                    {
                                        var list_page_child = new PageProvider().getListShow().Where(p => p.page_parent_id == pp.page_id).ToList();
                                        if (list_page_child.Count > 0)
                                        {
                                            <li class="nav-item">
                                                <a href="/pages/@pp.page_seo_alias" class="nav-link dropdown-toggle">
                                                    @pp.page_title <i class='bx bx-chevron-down'></i>
                                                </a>

                                                <ul class="dropdown-menu">
                                                    @foreach (var pc in list_page_child)
                                                    {
                                                        <li class="nav-item">
                                                            <a href="/pages/@pc.page_seo_alias" class="nav-link">
                                                                @pc.page_title
                                                            </a>
                                                        </li>
                                                    }

                                                </ul>
                                            </li>
                                        }
                                        else
                                        {
                                            <li class="nav-item">
                                                <a href="/pages/@pp.page_seo_alias" class="nav-link">
                                                    @pp.page_title
                                                </a>
                                            </li>
                                        }
                                    }
                                }

                            }

                            <li class="nav-item">
                                <a href="javascript:void(0)" class="nav-link dropdown-toggle">Dịch vụ <i class='bx bx-chevron-down'></i></a>
                                <ul class="dropdown-menu">
                                    @foreach (var service in list_service)
                                    {
                                        <li class="nav-item">
                                            <a href="/services/@service.seo_alias" class="nav-link">@service.category_name</a>
                                        </li>
                                    }
                                </ul>
                            </li>

                            <li class="nav-item">
                                <a href="/projects/all" class="nav-link dropdown-toggle">Dự án</a>
                            </li>
                            <li class="nav-item">
                                <a href="/blogs" class="nav-link dropdown-toggle">Tin tức và Sự kiện</a>
                            </li>
                            <li class="nav-item">
                                <a href="/pages/lien-he" class="nav-link">Liên hệ</a>
                            </li>
                        </ul>

                        <div class="side-nav">
                            @*<div class="nav-search">
                                    <i id="search-btn" class="bx bx-search-alt"></i>
                                    <div id="search-overlay" class="block">
                                        <div class="centered">
                                            <div id="search-box">
                                                <i id="close-btn" class="bx bx-x"></i>
                                                <form>
                                                    <input type="text" class="form-control" placeholder="Search..." />
                                                    <button type="submit" class="btn">Tìm kiếm</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>*@

                            <div class="lang-show">
                                <a class="flag-lang" href="javascript:void(0)" onclick="changeLanguageByButtonClick('vi')">
                                    <img src="~/Assets/img/flag/vi-flag.jpg" alt="Flag Vi" />
                                </a>
                                <a class="flag-lang" href="javascript:void(0)" onclick="changeLanguageByButtonClick('en')">
                                    <img src="~/Assets/img/flag/en-flag.jpg" alt="Flag En" />
                                </a>
                            </div>
                            <div id="google_translate_element" style="display:none"></div>
                            <script type="text/javascript">
                                function googleTranslateElementInit() {
                                    new google.translate.TranslateElement({ pageLanguage: "vi", includedLanguages: 'vi,en,ko,zh-CN' }, 'google_translate_element');
                                }

                                function changeLanguageByButtonClick(language) {
                                    //var language = document.getElementById("language").value;
                                    var selectField = document.querySelector("#google_translate_element select");
                                    for (var i = 0; i < selectField.children.length; i++) {
                                        var option = selectField.children[i];
                                        // find desired langauge and change the former language of the hidden selection-field
                                        if (option.value == language.toString()) {
                                            selectField.selectedIndex = i;
                                            // trigger change event afterwards to make google-lib translate this side
                                            selectField.dispatchEvent(new Event('change'));
                                            break;
                                        }
                                    }
                                }
                            </script>
                        </div>

                    </div>
                </nav>
            </div>
        </div>
    </div>
    <!-- End Navbar -->
    @RenderBody()

    <!-- Footer -->
    <footer class="footer-area pt-100">
        <div class="container">
            <div class="row">

                <div class="col-sm-6 col-lg-3">
                    <div class="footer-item">
                        <div class="footer-logo">
                            <a class="footer-inva" href="/">
                                <img src="@urlCMS/@logo_footer.image" alt="@logo_footer.alt">
                            </a>
                            <p>HM Media - Cung cấp các dịch vụ và giải pháp về truyền thông, sự kiện, booking TVC,...</p>
                            <ul>
                                <li>
                                    <a href="@fb_link" target="_blank">
                                        <i class='bx bxl-facebook'></i>
                                    </a>
                                </li>
                                <li>
                                    <a href="@twitter_link" target="_blank">
                                        <i class='bx bxl-twitter'></i>
                                    </a>
                                </li>
                                <li>
                                    <a href="@linkedin_link" target="_blank">
                                        <i class='bx bxl-linkedin'></i>
                                    </a>
                                </li>
                                <li>
                                    <a href="@instagram_link" target="_blank">
                                        <i class='bx bxl-instagram'></i>
                                    </a>
                                </li>
                                <li>
                                    <a href="@youtube_link" target="_blank">
                                        <i class='bx bxl-youtube'></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="footer-item">
                        <div class="footer-link">
                            <h3>Liên kết nhanh</h3>
                            <ul>
                                @foreach (var page in list_page_link)
                                {
                                    <li>
                                        <i class='bx bx-chevron-right'></i>
                                        <a href="/pages/@page.page_seo_alias">@page.page_title</a>
                                    </li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="footer-item">
                        <div class="footer-link">
                            <h3>Dịch vụ</h3>
                            <ul>
                                @foreach (var service in list_service)
                                {
                                    <li>
                                        <i class='bx bx-chevron-right'></i>
                                        <a href="/services/@service.seo_alias">@service.category_name</a>
                                    </li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="footer-item">
                        <div class="footer-contact">
                            <h3>Liên hệ</h3>
                            <ul>
                                <li>
                                    <i class='bx bxs-location-plus'></i>
                                    <span>@contact.address</span>
                                </li>
                                <li>
                                    <i class='bx bxs-phone-call'></i>
                                    <a href="tel:@contact.phone_number">@contact.phone_number</a>
                                </li>
                                <li>
                                    <i class='bx bxs-paper-plane'></i>
                                    <a href="mailto:@contact.email">@contact.email</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="copyright-area">
            <div class="container">
                <p>Copyright 2020 Design & Developed by <a href="https://diwe.vn/" target="_blank">Diwe.vn</a></p>
            </div>
        </div>
        <div class="footer-shape">
            <img src="../Assets/img/footer-bg.png" alt="Footer">
        </div>
    </footer>
    <!-- End Footer -->
    <!-- Go Top -->
    <div class="go-top">
        <i class="bx bxs-up-arrow-alt"></i>
        <i class="bx bxs-up-arrow-alt"></i>
    </div>
    <!-- End Go Top -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    @Scripts.Render("~/bundles/jsCoreSecond")
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <script>
        var $swipeTabsContainer = $(".swipe-tabs"),
            $swipeTabs = $(".swipe-tab"),
            $swipeTabsContentContainer = $(".swipe-tabs-container"),
            currentIndex = 0,
            activeTabClassName = "active-tab";

        $swipeTabsContainer.on("init", function (event, slick) {
            $swipeTabsContentContainer.removeClass("invisible");
            $swipeTabsContainer.removeClass("invisible");

            currentIndex = slick.getCurrent();
            $swipeTabs.removeClass(activeTabClassName);
            $(".swipe-tab[data-slick-index=" + currentIndex + "]").addClass(
                activeTabClassName
            );
        });
        $swipeTabsContainer.slick({
            slidesToShow: 4,
            slidesToScroll: 1,
            arrows: true,
            infinite: false,
            swipeToSlide: true,
            swipe: true,
            draggable: true,
            touchThreshold: 10,
            prevArrow: '<button type="button" class="slick-prev slick-prev-1 hidden"><i class="icon-next"></i></button>',
            nextArrow: '<button type="button" class="slick-next slick-next-1"><i class="fas fa-chevron-right"></i></button>',
            responsive: [
                {
                    breakpoint: 1200,
                    settings: {
                        arrows: true,
                        centerMode: true,
                        centerPadding: '40px',
                        slidesToShow: 4
                    }
                },
                {
                    breakpoint: 992,
                    settings: {
                        arrows: true,
                        centerMode: true,
                        centerPadding: '40px',
                        slidesToShow: 3
                    }
                },
                {
                    breakpoint: 768,
                    settings: {
                        arrows: true,
                        centerMode: true,
                        centerPadding: '40px',
                        slidesToShow: 2
                    }
                },
                {
                    breakpoint: 480,
                    settings: {
                        arrows: true,
                        centerMode: true,
                        centerPadding: '40px',
                        slidesToShow: 1
                    }
                }],
        });
        $swipeTabsContentContainer.slick({
            asNavFor: $swipeTabsContainer,
            slidesToShow: 1,
            slidesToScroll: 1,
            arrows: true,
            infinite: false,
            swipeToSlide: true,
            swipe: true,
            draggable: true,
            touchThreshold: 10,
            prevArrow: '<button type="button" class="slick-prev slick-prev-content hidden"><i class="fas fa-chevron-left"></i></button>',
            nextArrow: '<button type="button" class="slick-next slick-next-content"><i class="fas fa-chevron-right"></i></button>',
            responsive: [
                {
                    breakpoint: 1200,
                    settings: {
                        arrows: true,
                    }
                },
                {
                    breakpoint: 480,
                    settings: {
                        arrows: false,
                    }
                }]
        });
        $swipeTabs.on("click", function (event) {
            // gets index of clicked tab
            currentIndex = $(this).data("slick-index");
            $swipeTabs.removeClass(activeTabClassName);
            $(".swipe-tab[data-slick-index=" + currentIndex + "]").addClass(
                activeTabClassName
            );
            $swipeTabsContainer.slick("slickGoTo", currentIndex);
            $swipeTabsContentContainer.slick("slickGoTo", currentIndex);
        });
        $swipeTabsContentContainer.on("swipe", function (event, slick, direction) {
            currentIndex = $(this).slick("slickCurrentSlide");
            $swipeTabs.removeClass(activeTabClassName);
            $(".swipe-tab[data-slick-index=" + currentIndex + "]").addClass(
                activeTabClassName
            );
        });
        $swipeTabsContentContainer.on("afterChange", function (event, slick, i) {
            currentIndex = $(this).slick("slickCurrentSlide");
            $swipeTabs.removeClass(activeTabClassName);
            $(".swipe-tab[data-slick-index=" + currentIndex + "]").addClass(
                activeTabClassName
            );

            if (i === 3) {
                $('.slick-next-1').addClass('hidden');
            }
            else {
                $('.slick-next-1').removeClass('hidden');
            }

            if (i === 0) {
                $('.slick-prev-1').addClass('hidden');
            }
            else {
                $('.slick-prev-1').removeClass('hidden');
            }
        })
        $swipeTabsContainer.on("swipe", function (event, slick, i) {
            currentIndex = $(this).slick("slickCurrentSlide");
            $swipeTabs.removeClass(activeTabClassName);
            $(".swipe-tab[data-slick-index=" + currentIndex + "]").addClass(
                activeTabClassName
            );
            $swipeTabsContentContainer.slick("slickGoTo", currentIndex);
        })
        $swipeTabsContainer.on("afterChange", function (event, slick, i) {
            currentIndex = $(this).slick("slickCurrentSlide");
            $swipeTabs.removeClass(activeTabClassName);
            $(".swipe-tab[data-slick-index=" + currentIndex + "]").addClass(
                activeTabClassName
            );
            $swipeTabsContentContainer.slick("slickGoTo", currentIndex);
        })


        function sendMessage() {
            var cphone = $("#cphone").val();
            var cemail = $("#cemail").val();
            var cname = $("#cname").val();
            var cmessage = $('#cmessage').val();
            var csubject = "Cần tư vấn";
            if (cname == "" || cname == null) {
                alert("Yêu cầu nhập tên trước khi gửi");
            }
            else if (cemail == "" || cemail == null) {
                alert("Yêu cầu nhập email trước khi gửi");
            }
            else if (!isEmail(cemail)) {
                alert("Email không đúng định dạng");
            }
            else if (cphone == "") {
                alert("Yêu cầu nhập số điện thoại trước khi gửi");
            }
            else if (!phonenumber(cphone)) {
                alert("Số điện thoại không đúng định dạng");
            }
            else if (cmessage == "") {
                alert("Yêu cầu nhập số điện thoại trước khi gửi");
            }
            else {
                $.ajax({
                    type: "POST",
                    url: "/Page/SendMessage",
                    data: {
                        sender_name: cname,
                        sender_phone_number: cphone,
                        sender_email: cemail,
                        sender_subject: csubject,
                        sender_message: cmessage,
                    },
                    context: document.body,
                    dataType: "html",
                    beforeSend: function () {
                        $('#btn-submit').prop('disabled', true);
                        $('#btn-submit').text("Loading...");
                    },
                    success: function (data) {
                        $("#cname").val("");
                        $("#cemail").val("");
                        $("#cphone").val("");
                        $("#csubject").val("");
                        $("#cmessage").val("");
                        alert("Thông tin của bạn đã được gửi cho chúng tôi. Chúng tôi sẽ liên hệ lại với bạn sớm nhất. Cảm ơn bạn đã quan tâm!");
                    },
                    error: function (xhr, status) {
                        alert("Có lỗi xảy ra.");
                    },
                    complete: function (xhr, status) {
                        $('#btn-submit').text("Xác nhận");
                        $('#btn-submit').prop('disabled', false);
                    }
                });
            }
        }

        function phonenumber(inputtxt) {
            var phoneno = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
            if (inputtxt.match(phoneno)) {
                return true;
            }
            else {
                return false;
            }
        }

        function isEmail(email) {
            var regex = /^([a-zA-Z0-9_.+-])+\@@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            return regex.test(email);
        }
    </script>
    <script>
        $('form').on('keyup keypress', function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode === 13) {
                e.preventDefault();
                return false;
            }
        });


        $(".tab-link").click(function () {
            var tabID = $(this).attr("data-tab");

            $(this).addClass("active").siblings().removeClass("active");

            $("#tab-" + tabID)
                .addClass("active")
                .siblings()
                .removeClass("active");
        });
    </script>
</body>
</html>